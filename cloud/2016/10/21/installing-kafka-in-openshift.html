<!DOCTYPE html>
<html>
  <head>
    
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" href="/static/img/favicon.ico" />
        <title>Installing Kafka in OpenShift - Chumley Consulting Services</title>
        <meta name="author" content="Robert Chumley" />
        <meta name="description" content="Installing Kafka in OpenShift" />
        <meta name="keywords" content="Installing Kafka in OpenShift, Chumley Consulting Services, cloud" />

        <meta content="0" property="fb:app_id">
        <meta content="Chumley Consulting Services" property="og:site_name">
        
          <meta content="Installing Kafka in OpenShift" property="og:title">
        
        
          <meta content="article" property="og:type">
        
        
          <meta content="Software Development Blog" property="og:description">
        
        
          <meta content="http://github.com/RobertChumley/cloud/2016/10/21/installing-kafka-in-openshift.html" property="og:url">
        
        
          <meta content="2016-10-21T06:47:47-07:00" property="article:published_time">
          <meta content="http://github.com/RobertChumley/about/" property="article:author">
        
        
          <meta content="http://github.com/RobertChumley/static/img/logo-high-resolution.png" property="og:image">
        
        
          
          <meta content="cloud" property="article:section">
          
        
        
          
        
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@\RobertChumley\#">
        <meta name="twitter:creator" content="@\RobertChumley\#">
        
          <meta name="twitter:title" content="Installing Kafka in OpenShift">
        
        
          <meta name="twitter:url" content="http://github.com/RobertChumley/cloud/2016/10/21/installing-kafka-in-openshift.html">
        
        
          <meta name="twitter:description" content="Software Development Blog">
        
        

      <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
      
        <!-- Custom Fonts -->
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">

        <!-- FontAwesome icons -->
        <link rel="stylesheet" href="https://use.fontawesome.com/74dfc6cf47.css">

        <!-- Core BootStrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <!-- Material Design CSS -->
        <link rel="stylesheet" href="http://robertchumley.github.io/static/css/bootstrap-material-design.min.css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="http://robertchumley.github.io/static/css/syntax.css">

        <!-- Custom CSS -->        
        <link rel="stylesheet" href="http://robertchumley.github.io/static/css/thickbox.css">
        <link rel="stylesheet" href="http://robertchumley.github.io/static/css/main.css">
        <link rel="stylesheet" href="http://robertchumley.github.io/static/css/projects.css">

        <script type="text/javascript">
          //loadingImage is relative to project dir
          var tb_pathToImage = "http://robertchumley.github.io/static/img/loadingAnimation.gif";
        </script>

  </head>

  <body class="home overflow-hidden">
    <div class="header-panel shadow-z-2">
      <div class="container">
        <div class="row">
          <div class="col-md-3 col-sm-4 col-xs-12">
            <div class="row-picture">
              <img id="about" class="logo-img" src="/static/img/avatar.png" height="75px" width="75px">
            </div>
            <div class="row-details">
              <h4 class="list-group-item-heading">Robert Chumley</h4>
              <p class="list-group-item-text">Software Contractor</p>
              <div class="social-icons">
	
        <a class="icon" target="_blank" href=""><i class="fa fa-facebook"></i></a>
    
        <a class="icon" target="_blank" href=""><i class="fa fa-twitter"></i></a>
    
        <a class="icon" target="_blank" href=""><i class="fa fa-linkedin"></i></a>
    
        <a class="icon" target="_blank" href=""><i class="fa fa-stack-exchange"></i></a>
    
</div>

            </div>
            <div class="navbar-header pull-right">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-2x fa-bars"></i>
              </button>
            </div>
          </div>
          <div class="col-md-9 col-sm-8 col-xs-12">
            <h2 class="blog-title-pro">Installing Kafka in OpenShift</h2>
            <p class="info">
              
                <span class="time">21 Oct 2016</span>
              
              
                <span class="categories">
                  &raquo; 
                  
                    <a href="category/cloud">cloud</a>
                    
                  
                </span>
              
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="container main outer">
      <div class="row">
        <div class="col-md-3 col-xs-12">
              <nav class="menu">
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="list-separator nav navbar-nav well well-primary post">

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12 current-menu-item installing-kafka-in-openshift.html"><a href="http://robertchumley.github.io/" target="_self"><i class="fa fa-home"></i> Home</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  installing-kafka-in-openshift.html"><a href="http://robertchumley.github.io/about/" target="_self"><i class="fa fa-comments"></i> About</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  installing-kafka-in-openshift.html"><a href="http://robertchumley.github.io/projects" target="_self"><i class="fa fa-desktop"></i> Projects</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12 current-menu-item installing-kafka-in-openshift.html"><a href="http://robertchumley.github.io#" target="_self"><i class="fa fa-graduation-cap"></i> Resume</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  installing-kafka-in-openshift.html"><a href="https://github.com/RobertChumley" target="_self"><i class="fa fa-github"></i> Github</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  installing-kafka-in-openshift.html"><a href="http://robertchumley.github.io/feed.xml" target="_blank"><i class="fa fa-feed"></i> XML Feed</a></li>

</ul>

    </div>
    </nav>

        </div>
        <div class="col-md-9 col-xs-12 full">
          <div class="post-content well">
<article class="content">
    <div class="post"><p>Docker and OpenShift 3+ work in different security contexts.  This means that many images written specifically for docker will not work in OpenShift.
Specifically, the Kafka framwork written by wurstmeister (wurstmeister/kafka-docker), spotify and flozano all have the same problem.<br />
Since these modules were built to run as root they would not allow for connecting to the UNIX sockets.  This error will come up.</p>

<p><code class="highlighter-rouge">cannot open an http server: socket.error reported errno.eacces (13)</code></p>

<p>The solution was the build the docker modules for Kafka and Zookeeper from scratch.  Using this set of instructions:</p>

<p><a href="https://github.com/jim-minter/kafkanetes">https://github.com/jim-minter/kafkanetes</a></p>

<p>This allows creating containers in Open Shift with the necessary permissions.</p>

<p>We also needed to change the name of the container from the silly kafkanetes name to just</p>

<figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line">kafka</div></div></pre></div></figure>

<p>This was easily found in the kafkanetes-deploy-kafka-1.yaml file.</p>

<p>The volume mount definition in the kafkanetes was well defined, but carefully consider where the data is going.  It is recommended to create the Volume name ahead of time 
then use the template to modify the name of the Volume mount.  This will allow complete control over the location of the volume. Both the kafka and kubernetes definitions will need to be modified.</p>

<p>The next phase will be installing a kafka cluser and allowing for scaling the cluster through zookeeper.  Also, zookeeper can be used with other services to form a network of services.</p>
</div>
    <hr />
    <div class="share-page">
    Share this on &rarr;
 <a href="https://twitter.com/share" class="twitter-share-button" data-via="\RobertChumley\#">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google + -->
<div class="g-plus" data-action="share" data-annotation="bubble"></div>
<script src="https://apis.google.com/js/platform.js" async defer></script>

<!-- Facebook -->
<div class="fb-share-button" data-href="http://github.com/RobertChumley/cloud/2016/10/21/installing-kafka-in-openshift.html" data-layout="button_count" style="position: relative; top: -8px; left: 3px;"></div>
</div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</article>
<hr />


    
    
        
            
        
    

    
    
        
            
        
    



<div class="PageNavigation">
  
  
    <a class="next pull-right" href="/refactoring/2016/10/25/functional-refactoring-for-a-repository-pattern.html">Functional Refactoring for a Repository Pattern &raquo;</a>
  
</div>


<div class="disqus-comments">
    <div id="disqus_thread"></div>
    <script>

        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        /*
         var disqus_config = function () {
         this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
         this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
         };
         */
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '//robertchumley.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>
          <div class="row">
            <div class="col-md-12 col-xs-12 footer">
              <footer>
  Â© 2016 Your Name <a href="#">Privacy link</a> - Powered by Jekyll.
</footer>
<div align="center">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-0000000000000000"
    data-ad-slot="0000000000"
    data-ad-format="auto"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  <script id="dsq-count-scr" src="//robertchumley.disqus.com/count.js" async></script>
</div>

            </div>
          </div>
        </div> <!-- end /.col-md-9 -->
      </div> <!-- end /.row -->
    </div>

    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="http://robertchumley.github.io/static/js/thickbox-compressed.js"></script>
<script src="http://robertchumley.github.io/static/js/material.min.js"></script>
<script src="http://robertchumley.github.io/static/js/main.js"></script>
<script src="http://robertchumley.github.io/static/js/projects.js"></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72862926-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
